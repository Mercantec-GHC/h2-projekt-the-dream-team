@page "/admin"
@rendermode InteractiveServer
@inherits BasePage

@inject ApiClient Api

<PageTitle>Admin</PageTitle>

<h3 class="mb-4">Værelser</h3>

<!-- Stats Cards -->
<div class="d-flex flex-wrap flex-lg-nowrap gap-4 mb-4">
    <!-- Bookings Card -->
    <div class="w-100">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center">
                <i class="bi bi-calendar-check fs-1 text-primary mb-3"></i>

                <h5 class="card-title text-muted">Bookings</h5>

                <h2 class="display-4 fw-bold mb-0 mt-1">@bookingsCount</h2>

                <a href="/admin/manage-bookings" class="btn btn-primary mt-3 w-100">
                    Administrer Bookings
                </a>
            </div>
        </div>
    </div>

    <!-- Guests Card -->
    <div class="w-100">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center">
                <i class="bi bi-people fs-1 text-success mb-3"></i>

                <h5 class="card-title text-muted">Gæster</h5>

                <h2 class="display-4 fw-bold mb-0 mt-1">@guestsCount</h2>

                <a href="/admin/manage-guests" class="btn btn-success mt-3 w-100">
                    Administrer Gæster
                </a>
            </div>
        </div>
    </div>

    <!-- Rooms Card -->
    <div class="w-100">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center">
                <i class="bi bi-door-open fs-1 text-info mb-3"></i>

                <h5 class="card-title text-muted">Værelser</h5>

                <h2 class="display-4 fw-bold mb-0 mt-1">@roomsCount</h2>

                <a href="/admin/manage-rooms" class="btn btn-info mt-3 w-100">
                    Administrer Værelser
                </a>
            </div>
        </div>
    </div>

    <!-- Room Types Card -->
    <div class="w-100">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center">
                <i class="bi bi-list-ul fs-1 text-warning mb-3"></i>

                <h5 class="card-title text-muted">Værelsestyper</h5>

                <h2 class="display-4 fw-bold mb-0 mt-1">@roomTypesCount</h2>

                <a href="/admin/manage-room-types" class="btn btn-warning mt-3 w-100">
                    Administrer Værelsestyper
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Gantt Diagram Section -->
<div class="w-100 card shadow-sm">
    <div class="card-header bg-white">
        <h4 class="mb-0">Booking Schedule - Gantt Diagram</h4>
    </div>

    <div class="card-body" style="min-height: 500px;">
        <!-- Gantt diagram will be implemented here -->
        <div class="text-center text-muted py-5">
            <i class="bi bi-calendar3 fs-1"></i>

            <p class="mt-3">Gantt diagram showing bookings and rooms will be displayed here</p>
        </div>
    </div>
</div>

@code {
    private int bookingsCount = 0;
    private int guestsCount = 0;
    private int roomsCount = 0;
    private int roomTypesCount = 0;

    protected override async Task OnInitializedAsync()
    {
        // var bookings = await Api.GetAllBookingsAsync();

        // bookingsCount = bookings.Count;

        var guests = await Api.GetAllGuestsAsync();

        guestsCount = guests.Count;

        var rooms = await Api.GetAllRoomsAsync();

        roomsCount = rooms.Count;

        var roomTypes = await Api.GetAllRoomTypesAsync();

        roomTypesCount = roomTypes.Count;
    }
}
